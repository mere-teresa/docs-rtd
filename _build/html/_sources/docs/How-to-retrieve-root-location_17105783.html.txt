#. `eZ Publish Platform 5.<next> <index.html>`__
#. `eZ Publish Platform
   Documentation <eZ-Publish-Platform-Documentation_1114149.html>`__
#. `Development & Administration Guides <6291674.html>`__
#. `Developing with eZ Publish
   5 <Developing-with-eZ-Publish-5_2720528.html>`__
#. `Developer Cookbook <Developer-Cookbook_11403951.html>`__

eZ Publish Platform 5.<next> : How to retrieve root location
============================================================

Added by jerome.vieilledent@ez.no , edited by jerome.vieilledent@ez.no
on Nov 18, 2013

Version compatibility

Icon

This recipe is compatible with \ **eZ Publish 5.2 / 2013.09**

-  `Description <#Howtoretrieverootlocation-Description>`__
-  `Retrieving root location
   ID <#Howtoretrieverootlocation-RetrievingrootlocationID>`__
-  `Retrieving the root
   location <#Howtoretrieverootlocation-Retrievingtherootlocation>`__

   -  `From a template <#Howtoretrieverootlocation-Fromatemplate>`__
   -  `From a controller <#Howtoretrieverootlocation-Fromacontroller>`__

Description
-----------

Knowledge of the root location is important since it can be a starting
point for API queries, or even links to home page, but as eZ Publish can
be used `for multisite
development <Multisite-using-content_root_12781016.html>`__, and as such
**root location can vary**.

By default, root location ID is ``2``, but as it can be easily be
changed by configuration, **the best practice is to retrieve it
dynamically**.

Retrieving root location ID
---------------------------

Root location ID can be retrieved easily from
`ConfigResolver <Configuration_2720538.html#Configuration-Configuration-DynamicconfigurationwiththeConfigResolver>`__.
Parameter name is \ ``content.tree_root.location_id``.

**In a controller**

.. code:: theme:

    <?php
    namespace Acme\TestBundle\Controller;

    use eZ\Bundle\EzPublishCoreBundle\Controller;


    class DefaultController extends Controller
    {
        public function fooAction()
        {
            // ...
     
            $rootLocationId = $this->getConfigResolver()->getParameter( 'content.tree_root.location_id' );
     
            // ...
        }
    }

Retrieving the root location
----------------------------

From a template
~~~~~~~~~~~~~~~

Root location is exposed in the `global Twig
helper <Twig-Helper_8323403.html>`__.

**Making a link to homepage**

.. code:: theme:

    <a href="{{ path( ezpublish.rootLocation ) }}" title="Link to homepage">Home page</a>

From a controller
~~~~~~~~~~~~~~~~~

**eZ Publish 5.2+ / 2013.11+**

.. code:: theme:

    <?php
    namespace Acme\TestBundle\Controller;

    use eZ\Bundle\EzPublishCoreBundle\Controller;

    class DefaultController extends Controller
    {
        public function fooAction()
        {
            // ...

            $rootLocation = $this->getRootLocation();

            // ...
        }
    }

**Before 5.2 / 2013.11**

.. code:: theme:

    <?php
    namespace Acme\TestBundle\Controller;

    use eZ\Bundle\EzPublishCoreBundle\Controller;

    class DefaultController extends Controller
    {
        public function fooAction()
        {
            // ...

            $rootLocationId = $this->getConfigResolver()->getParameter( 'content.tree_root.location_id' );
            $rootLocation = $this->getRepository()->getLocationService()->loadLocation( $rootLocationId );

            // ...
        }
    }

 

 

Document generated by Confluence on Feb 12, 2014 16:43
