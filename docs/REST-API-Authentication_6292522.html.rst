#. `eZ Publish Platform 5.<next> <index.html>`__
#. `eZ Publish Platform
   Documentation <eZ-Publish-Platform-Documentation_1114149.html>`__
#. `Development & Administration Guides <6291674.html>`__
#. `eZ Publish REST API <eZ-Publish-REST-API_6292277.html>`__

eZ Publish Platform 5.<next> : REST API Authentication
======================================================

Added by bertrand.dunogier@ez.no , edited by gaetano.giunta@ez.no on Jul
20, 2013

At the time of the 5.0 release, two authentication methods were
supported: session, and basic. **Session based authentication** is meant
to be used for AJAX operations. It will let you re-use the visitor's
session to execute operations with their permissions. **Basic
authentication** will be useful when writing cross-server procedures,
when one server executes operations on one/several eZ Publish instances
(remote publishing, maintenance, etc).

`oAuth2 <http://oauth.net/2/>`__ is also supported as for eZ Publish 5.1
release.

Session based
-------------

This authentication method requires a Session cookie to be sent with the
request. If this authentication method is used through a web browser,
this session cookie is available as soon as your visitor logs in. Add it
as a request cookie to your REST requests, and the user will be
authenticated.

Setting it up
~~~~~~~~~~~~~

To enable session based authentication, you need to
edit \ ``ezpublish/config/security.yml``, and comment / remove the
configuration block about REST

**ezpublish.yml**

.. code:: theme:

            ezpublish_rest:
                pattern: ^/api/ezp/v2
                stateless: true
                ezpublish_http_basic:
                    realm: eZ Publish REST API

Logging in
~~~~~~~~~~

It is also possible to create a session for the visitor if he isn't
logged in yet. This is done by sending
a \ **``POST``** request to ``/user/sessions``. Logging out is done
using a \ **``DELETE``** request on the same resource.

More details about this can be found in the `reference
documentation <https://github.com/ezsystems/ezpublish-kernel/blob/master/doc/specifications/rest/REST-API-V2.rst>`__.

Example
~~~~~~~

**Session authentication with siteaccess header**

.. code:: theme:

    GET / HTTP/1.1
    Host: api.example.com
    Accept: application/vnd.ez.api.Root+json
    Cookie: eZSESSID22af645d1859cb5ca6da0c484f1f37ea=ca8123ccb543834fecd48f282a40156e

More information

Icon

`Session based authentication chapter of the REST
specifications <https://github.com/ezsystems/ezp-next/blob/master/doc/specifications/rest/REST-API-V2.rst#123%C2%A0%C2%A0%C2%A0session-based-authentication>`__

Basic HTTP authentication
-------------------------

Basic authentication requires the password to be sent, based 64 encoded,
with the request, as explained in \ `RFC
2617 <http://tools.ietf.org/html/rfc2617>`__.

Most HTTP client libraries as well as REST libraries, should support
this method one way or another.

**Raw HTTP request with basic authentication**

.. code:: theme:

    GET / HTTP/1.1
    Host: api.example.com
    Accept: application/vnd.ez.api.Root+json
    Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==

Document generated by Confluence on Feb 12, 2014 16:43
